services:
  seq:
    image: datalust/seq:latest
    container_name: seq
    ports:
      - "5341:5341"
      - "8000:80"
      - "9091:9091"
    environment:
      - ACCEPT_EULA=Y
      - SEQ_FIRSTRUN_ADMINPASSWORD=admin123
    volumes:
      - seq-data:/data
      - ./plugins:/data/Apps
      - ./metrics.yaml:/data/config/metrics.yaml
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5341"]
      interval: 5s
      timeout: 3s
      retries: 20

  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml:ro

volumes:
  seq-data: